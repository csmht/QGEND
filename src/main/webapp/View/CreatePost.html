<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>发帖页面</title>
    <script src="../axios.min.js"></script>
    <script src="../vue.js"></script>
    <link rel="stylesheet" href="../View/CreatePost.css">

</head>

<body>
<div id="post-create-app">
    <div class="post-form">
        <h1>发布新帖子</h1>
        <div class="form-group">
            <label for="post-title">标题</label>
            <input type="text" id="post-title" v-model="postTitle" placeholder="请输入帖子标题">
        </div>
        <div class="form-group">
            <label for="post-content">内容</label>
            <textarea id="post-content" v-model="postContent" rows="10" placeholder="请输入帖子内容"></textarea>
        </div>
        <div class="form-group">
            <label for="post-image">上传图片</label>
            <input type="file" id="post-image" @change="handleImageUpload">
        </div>
        <div class="form-group">
            <label for="post-schedule">定时发送</label>
            <input type="datetime-local" id="post-schedule" v-model="scheduledTime">
        </div>
        <div class="form-actions">
            <button @click="submitPost">立即发布</button>
            <button @click="schedulePost">定时发布</button>
        </div>
    </div>
</div>
<script>
    new Vue({
        el: '#post-create-app',
        data: {
            postTitle: '',
            postContent: '',
            postImage: null,
            scheduledTime: '',
        },
        methods: {
            handleImageUpload(event) {
                this.postImage = event.target.files[0];
            },
            submitPost() {
                if (this.postTitle && this.postContent) {
                    const formData = new FormData();
                    formData.append('title', this.postTitle);
                    formData.append('content', this.postContent);
                    if (this.postImage) {
                        formData.append('image', this.postImage);
                    }
                    // 这里应添加实际的 POST 请求代码，例如使用 axios 发送到后端
                    console.log('立即发布的数据:', formData);
                    alert('帖子已立即发布');
                    this.resetForm();
                } else {
                    alert('请填写标题和内容');
                }
            },
            schedulePost() {
                if (this.postTitle && this.postContent && this.scheduledTime) {
                    const formData = new FormData();
                    formData.append('title', this.postTitle);
                    formData.append('content', this.postContent);
                    if (this.postImage) {
                        formData.append('image', this.postImage);
                    }
                    formData.append('scheduledTime', this.scheduledTime);
                    // 这里应添加实际的 POST 请求代码，例如使用 axios 发送到后端
                    console.log('定时发布的数据:', formData);
                    alert(`帖子已设置为在 ${this.scheduledTime} 发布`);
                    this.resetForm();
                } else {
                    alert('请填写标题、内容并选择定时发送时间');
                }
            },
            resetForm() {
                this.postTitle = '';
                this.postContent = '';
                this.postImage = null;
                this.scheduledTime = '';
            }
        }
    });
</script>
</body>

</html>
